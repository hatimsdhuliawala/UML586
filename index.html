<!DOCTYPE HTML>
<html lang="en">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="">
    <meta name="author" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />

    <title>Education</title>
    <!-- Scripts -->
    <script type="text/javascript" src="js/jquery-1.11.1.min.js"></script>
    <script type="text/javascript" src="js/dataframe.js"></script>
    <script type="text/javascript" src="js/chart.js"></script>
    <script type="text/javascript" src="bootstrap-3.3.4/bootstrap-3.3.4-dist/js/bootstrap.min.js"></script>

    <!--css -->
    <link rel="stylesheet" href="bootstrap-3.3.4/bootstrap-3.3.4-dist/css/bootswatch.css">
    <link rel="stylesheet" href="bootstrap-3.3.4/bootstrap-3.3.4-dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="css/font-awesome.min.css" />
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/animate.css">
</head>

<body class="">
    <!-- Progress Bar Start-->
  <!--  <div class="clearfix progress-bar-div" style="display: none;">
        <div class="progress progress-striped">
            <div class="bar progress-bar progress-bar-success" style="width: 2343px;"></div>
        </div>
    </div>-->
    <!-- Progress Bar End-->
    <div class="wrapper clearfix">
        <!-- Spinner start-->
        <div class="overlay page-spinner" style=""></div>
        <div class="overlay1 page-spinner" style="">
                <div class="spinner"></div>
        </div>
        <!-- Spinner end-->
        <!-- navbar start -->
        <nav class="navbar navbra-default">
            <div class="container-fluid">
                <!-- Brand and toggle get grouped for better mobile display -->
                <div class="navbar-header">
                    <a class="navbar-brand" href="#">Education</a>
                </div>
            </div>
        </nav>
        <!-- navbar end -->

        <!-- content start -->
        <div class="container">
          <div class="row">
            <div class="col-xs-12">
              <blockquote class="blockquote-reverse">
                <p>Education is what remians after one has forgotten everything he learned <strong>in school</strong></p>
                <small> <cite title="Source Title">- Einstein</cite></small>
              </blockquote>
            </div>
            <div class="col-xs-12">
              <div class="panel panel-primary">
                <div class="panel-heading">
                  <h3 class="panel-title">Select Datasets</h3>
                </div>
                <div class="panel-body">
                  <ul class="nav nav-tabs select-datasets-tab">
                      <li class="active"><a href="#dataset1" data-toggle="tab" dataset-name="Ch_PS_11-12" dataset-id="dataset1" data-toggle="tab">Chicago Schools 2011-2012</a></li>
                      <li><a href="#dataset2" data-toggle="tab" dataset-name="Ch_PS_12-13" dataset-id="dataset2">Chicago Schools 2012-2013</a></li>
                      <li><a href="#dataset3" data-toggle="tab" dataset-name="Ch_PS_13-14" dataset-id="dataset3">Chicago Schools 2013-2014</a></li>
                      <li><a href="#dataset4" data-toggle="tab" dataset-name="All_Progress_11-12" dataset-id="dataset4">All Progress Report 2011-2012</a></li>
                      <li><a href="#dataset5" data-toggle="tab" dataset-name="All_School_13-14" dataset-id="dataset5">All School Subject Details</a></li>
                    </ul>
                    <div id="myTabContent" class="tab-content">
                      <div class="tab-pane fade active in" id="dataset1" dataset-name="Ch_PS_11-12">
                        <div class="col-xs-12 table-overflow">
                          <h6><strong>Chicago Public Schools/High School Progress Report Card 2012-2013</strong></h6>
                          <table id="dataset1Table" class="table table-striped dataset-table">
                              <thead>
                                <tr></tr>
                              </thead>
                              <tbody class="tbody"></tbody>
                          </table>

                        </div>
                        <div class="col-xs-12">
                          <hr>
                          <h6><strong>Apply Filters</strong></h6>
                        </div>
                        <div class="col-xs-12">
                          <form class="form-horizontal">
                            <fieldset>
                              <div class="form-group">
                                <div class="col-xs-12 mrB-10">
                                  <h6><strong class="text-center col-xs-12">Please Select the Data Labels (Columns).</strong></h6>
                                </div>
                                <div class="col-xs-offset-1 col-xs-10 dataset1Filters datasetFilters">

                                </div>
                              </div>
                              <div class="form-group">
                                <div class="col-lg-12 text-right">
                                 <a href="#" id="addFilter1" class="btn btn-primary mrL-15 mrR-10">Add Filters</a>
                               </div>
                              </div>
                              <div class="form-group select-options">
                                <div class="col-lg-12">
                                </div>
                              </div>
                              <div class="form-group">
                                <label for="select" class="col-lg-2 control-label">Select Chart</label>
                                <div class="col-lg-10">
                                  <select class="form-control selectChart" id="">
                                    <option value="Bar">Bar Chart</option>
                                    <option value="Line">Line Chart</option>
                                    <option value="Stack">Stack Chart</option>
                                    <option value="Pie">Pie Chart</option>
                                    <option value="Doughnut">Doughnut Chart</option>
                                  </select>
                                </div>
                              </div>
                            <div class="form-group numerical_filter mr-0">
                              <div class="checkbox text-right">
                                <label>
                                  <input class="numerical_filter_check mrR-5" type="checkbox">  Use Numerical Filter</label>
                              </div>
                            </div>
                            <div class="form-group numerical_filter filter_disabled">
                               <label class="col-lg-2 control-label">Please Select the Filter Condition </label>
                               <div class="col-lg-10">
                                 <div class="radio disabled">
                                       <label>
                                         <input type="radio" name="optionsRadios" id="optionsRadios1" value="greater" checked="" disabled=true>
                                         Greater than Equal to
                                       </label>
                                     </div>
                                  <div class="radio disabled">
                                       <label>
                                         <input type="radio" name="optionsRadios" id="optionsRadios2" value="lesser" disabled=true>
                                         Less than Equal to
                                       </label>
                                     </div>
                                  <div class="radio disabled">
                                       <label>
                                         <input type="radio" name="optionsRadios" id="optionsRadios2" value="equal" disabled=true>
                                         Equal to
                                       </label>
                                     </div>



                               </div>
                               <div class="form-group clear-both">
                                <label for="numericalValue" class="col-lg-2 control-label">Please Enter the value for Filter Condition</label>
                                <div class="col-lg-10">
                                  <input type="text" class="form-control numerical_value" id="numericalValue" placeholder="">
                                </div>
                              </div>
                            </div>
                            <div class="form-group">
                               <div class="col-lg-10 col-lg-offset-2 text-right">
                                 <button type="reset" class="btn btn-default">Cancel</button>
                                 <a href="#" id="PlotChart1" dataset-name = "Ch_PS_11-12" dataset-id="dataset1" class="btn btn-primary mrL-15 mrR-10">Plot Chart</a>
                               </div>
                             </div>
                            </fieldset>
                          </form>

                        </div>
                        <!-- Charts Div Starts-->
                        <div class="bs-example clear-both">
                          <div class="panel-group chart-accordian" id="accordion">
                              <div class="panel panel-default chart-div" style="display:none;">
                                  <div class="panel-heading">
                                      <h4 class="panel-title"data-toggle="collapse" data-parent="#accordion" data-target="#collapseOne">
                                      Bar Chart<span class="glyphicon glyphicon-chevron-down pull-right"></span>
                                      </h4>
                                  </div>
                                  <div id="dataset1BarDiv" class="panel-collapse collapse">
                                      <div class="panel-body">
                                          <h6 class="text-center"><strong>Number of Schools / Zip code</strong></h6>
                                          <canvas id="dataset1BarChart" width="400" height="auto"></canvas>
                                      </div>
                                  </div>
                              </div>
                              <div class="panel panel-default chart-div" style="display:none;">
                                <div class="panel-heading">
                                    <h4 class="panel-title"data-toggle="collapse" data-parent="#accordion" data-target="#collapseTwo">
                                    Pie Chart<span class="glyphicon glyphicon-chevron-down pull-right"></span>
                                    </h4>
                                </div>
                                  <div id="dataset1PieDiv" class="panel-collapse collapse in">
                                      <div class="panel-body">
                                          <h6 class="text-center"><strong>School and their Safety</strong></h6>
                                          <canvas id="dataset1PieChart" width="400" height="100"></canvas>
                                      </div>
                                  </div>
                              </div>

                              <div class="panel panel-default chart-div" style="display:none;">
                                <div class="panel-heading">
                                    <h4 class="panel-title"data-toggle="collapse" data-parent="#accordion" data-target="#collapseThree">
                                    Line Chart<span class="glyphicon glyphicon-chevron-down pull-right"></span>
                                    </h4>
                                </div>
                                  <div id="dataset1LineDiv" class="panel-collapse collapse in">
                                      <div class="panel-body">
                                        <h6 class="text-center"><strong>Schools / Zip code</strong></h6>
                                          <canvas id="dataset1LineChart" width="400" height="auto"></canvas>
                                      </div>
                                  </div>
                              </div>
                              <div class="panel panel-default chart-div" style="display:none;">
                                <div class="panel-heading">
                                    <h4 class="panel-title"data-toggle="collapse" data-parent="#accordion" data-target="#collapseFour">
                                    Stack Chart<span class="glyphicon glyphicon-chevron-down pull-right"></span>
                                    </h4>
                                </div>
                                  <div id="dataset1StackDiv" class="panel-collapse collapse in">
                                      <div class="panel-body">
                                          <canvas id="dataset1StackChart" width="400" height="auto"></canvas>
                                      </div>
                                  </div>
                              </div>
                              <div class="panel panel-default chart-div" style="display:none;">
                                <div class="panel-heading">
                                    <h4 class="panel-title"data-toggle="collapse" data-parent="#accordion" data-target="#collapseFive">
                                    Doughnut Chart<span class="glyphicon glyphicon-chevron-down pull-right"></span>
                                    </h4>
                                </div>
                                  <div id="dataset1DoughnutDiv" class="panel-collapse collapse in">
                                      <div class="panel-body">
                                          <canvas id="dataset1DoughnutChart" width="400" height="100"></canvas>
                                      </div>
                                  </div>
                              </div>
                          </div>

                      </div>

                      </div>
                      <div class="tab-pane fade" id="dataset2" dataset-name="Ch_PS_12-13">
                        <div class="col-xs-12 table-overflow">
                          <h6><strong>Chicago Public Schools/High School Progress Report Card 2012-2013</strong></h6>
                          <table id="dataset2Table" class="table table-striped dataset-table">
                              <thead></thead>
                              <tbody class="tbody"></tbody>
                          </table>
                        </div>

                      </div>
                      <div class="tab-pane fade" id="dataset3" dataset-name="Ch_PS_13-14">
                        <div class="col-xs-12 table-overflow">
                          <h6><strong>Chicago Public Schools/High School Progress Report Card 2013-2014</strong></h6>
                          <table id="dataset3Table" class="table table-striped dataset-table">
                              <thead></thead>
                              <tbody class="tbody"></tbody>
                          </table>
                        </div>
                      </div>
                      <div class="tab-pane fade" id="dataset4" dataset-name="All_Progress_11-12">
                        <div class="col-xs-12 table-overflow">
                          <h6><strong>All Progress Report 2011-2012</strong></h6>
                          <table id="dataset4Table" class="table table-striped dataset-table">
                              <thead></thead>
                              <tbody class="tbody"></tbody>
                          </table>
                        </div>
                      </div>
                      <div class="tab-pane fade" id="dataset5" dataset-name="All_School_13-14">
                        <div class="col-xs-12 table-overflow">
                          <h6><strong>All School Subject Data</strong></h6>
                          <table id="dataset5Table" class="table table-striped dataset-table">
                              <thead></thead>
                              <tbody class="tbody"></tbody>
                          </table>
                        </div>
                      </div>
                    </div>
                </div>
              </div>
            </div>

          </div>
        </div>


    </div>

    <!--Footer starts-->
    <div class="footer clearfix">
        <!--footer menu starts-->
        <div class="container-fluid">
            <div class="col-md-12 mrT-5 mrB-10">
                <div class="row clear-both color-grey">
                    <div class="text-center footer-links">©2017 Education- UML
                    </div>
                </div>

            </div>
        </div>
    </div>
    <!--Footer Ends-->
    <!-- <script type="text/javascript" src="js/Common.js"></script> -->
    <script type="text/javascript" src="js/GlobalVariable.js"></script>
    <script type="text/javascript" src="js/renderDatasets.js"></script>
  <!-- <script type="text/javascript" src="js/extractData.js"></script> -->
    <script type="text/javascript" src="js/ChartType.js"></script>
    <script type="text/javascript" src="js/PlotBarchart.js"></script>
    <script type="text/javascript" src="js/PlotLinechart.js"></script>
    <script type="text/javascript" src="js/PlotStackchart.js"></script>
    <script type="text/javascript" src="js/PlotPiechart.js"></script>
    <script type="text/javascript" src="js/PlotDoughnutchart.js"></script>
    <script type="text/javascript" src="js/Datasets.js"></script>
    <script type="text/javascript" src="js/SelectDataset1.js"></script>
    <script type="text/javascript" src="js/bootstrap-select.js"></script>
    <script type="text/javascript" src="js/Filter.js"></script>
    <script type="text/javascript" src="js/Strategy.js"></script>
    <script type="text/javascript" src="js/Decorator.js"></script>
    <script type="text/javascript" src="js/facade.js"></script>

    <script type="text/javascript">
      $(window).on('load', function () {
        var test = new Datasets();
      });
    </script>

    <script type="text/javascript">
      $("#PlotChart1").on('click', function (e) {
        e.preventDefault();
        var datasetName = $(this).attr("dataset-name");
        var typeOfChart = $(".selectChart").val();
        var divID = getReltedDivID(typeOfChart);
        var getDataFromFilter = getSelectedColumnValues($(this).attr("dataset-id"), typeOfChart);
        $(".page-spinner").show();
        $(this).closest(".tab-pane").find(".chart-accordian").children().hide();
        $(this).closest(".tab-pane").find(".chart-accordian").children().find("#"+divID[0]).parent().show();
        $(this).closest(".tab-pane").find(".chart-accordian").children().find("#"+divID[0]).addClass("in");
        var selectedDatasetName= new SelectDataset1();
        selectedDatasetName.createChart(typeOfChart, datasetName, divID[1], getDataFromFilter);
        setTimeout(function () {
          $(".page-spinner").hide();
        },2000);
      });
      function getReltedDivID (typeOfChart) {
        var divID =[];
        if ( typeOfChart == 'Line' ) {
          divID.push('dataset1LineDiv');
          divID.push('dataset1LineChart');
        } else if (  typeOfChart == 'Bar' ) {
          divID.push('dataset1BarDiv');
          divID.push('dataset1BarChart');
        } else if (  typeOfChart == 'Stack' ) {
          divID.push('dataset1StackDiv');
          divID.push('dataset1StackChart');
        } else if (  typeOfChart == 'Pie' ) {
          divID.push('dataset1PieDiv');
          divID.push('dataset1PieChart');
        } else if (  typeOfChart == 'Doughnut' ) {
          divID.push('dataset1DoughnutDiv');
          divID.push('dataset1DoughnutChart');
        }
        return divID;
      }
      //function to get the data from selected filter column
      function getSelectedColumnValues(datasetId, typeOfChart) {
        var datasetID = datasetId;
       var master = [];
       var labelCount =[];
       var labelArray =[];
       var countArray =[];
       var filterNameArray = [];
       var flag = $("#"+datasetID+" .numerical_filter_check").prop("checked");
       var getCondition;
       var getInputVal = $("#"+datasetID+" .numerical_value").val();
       $("#"+datasetID+" .numerical_filter input[type='radio']").each( function () {
         if($(this).prop("checked") == true) {
           getCondition = $(this).attr("value");
         }
       });

       if (typeOfChart == 'Stack') {
         var maxLength = 0;
         $("#"+datasetID+" .select-options .first_dataset").each( function () {
           var getFilterNam = $(this).attr("filter-name");
           var label = $(this).val();
           var innerArray = [];
           var count = [];

           if(label.length > maxLength) {
             maxLength = label.length;
           }
           filterNameArray.push(getFilterNam);
           for ( var i = 0; i < label.length; i++) {
             var dec = new DecoratorFilter(df1,getFilterNam,label[i]);
             if(flag) {
               var dec = new Range(dec,getInputVal,getCondition,getFilterNam);
             }
             var value = dec.getFiltered().count();
             count.push(value);
           }
           for ( var i = 0; i < label.length; i++) {
             innerArray.push([]);
             innerArray[i].push(label[i]);
             innerArray[i].push(count[i]);
           }
           master.push(innerArray);
         });
         return [master, filterNameArray, maxLength];
       } else {
         $("#"+datasetID+" .select-options .first_dataset").each( function () {

           var getFilterNam = $(this).attr("filter-name");
           filterNameArray.push(getFilterNam);
           var label = $(this).val();
           countArray.push(label.length);
           labelArray = labelArray.concat(label);
           for ( var i = 0; i < label.length; i++) {
             var dec = new DecoratorFilter(df1,getFilterNam,label[i]);
             if(flag) {
               var dec = new Range(dec,getInputVal,getCondition,getFilterNam);
             }
             var value = dec.getFiltered().count();
             labelCount.push(value);
           }
         });

           return [ labelArray, labelCount];
       }




     }
    //   var oPizzaStore = new NewYorkPizzaStore();
    // oPizzaStore.orderPizza("pepperoni");

    </script>

    <script type="text/javascript">
        $('.datasetFilters ').on('click', 'input[type="checkbox"]', function () {
          var getDatasetVar = $(this).attr("datasetNAme");
          if($(this).prop("checked") == true){
            if(getDatasetVar == "dataset1Filters"){
              dataset1Filters.push($(this).parent().text());
            }
            //for other GlobalVariables
          } else {
            if(getDatasetVar == "dataset1Filters"){
              dataset1Filters.splice(dataset1Filters.indexOf($(this).parent().text() ), 1);
            }
          }

        });
        $("#addFilter1").on('click', function (e) {
          e.preventDefault();
          $(".select-options").children().remove();
          //$('.datasetFilters ')



          var length = dataset1Filters.length;
          var ft = new Filter();
          for ( var i = 0; i < length; i++) {
            var selectDropdown = '<label for="select" class="col-lg-2 control-label">'+dataset1Filters[i]+'</label>'+
                                  '<div class="col-lg-10 mrB-20">'+
                                    '<select multiple class="form-control first_dataset selectDatasetFilter'+i+'" id="" filter-name="'+dataset1Filters[i]+'">'+
                                    '</select>'+
                                  '</div>';
            $(this).parent().parent().siblings(".select-options").append(selectDropdown);
            var option = ft.generateColumnFilter(dataset1Filters[i]);
              $(".selectDatasetFilter"+i).append(option);
          } '<option value="sdfsfsd">sfsfds</option>';

        });

        $(".numerical_filter_check").on('click', function () {
          if($(this).prop("checked") == true) {
            $(this).closest(".form-group").siblings(".numerical_filter").toggleClass("filter_disabled");
            $(this).closest(".form-group").siblings(".numerical_filter").find(".radio").toggleClass("disabled");
            $(this).closest(".form-group").siblings(".numerical_filter").find("input[type='radio']").attr("disabled",false);
            $(this).closest(".form-group").siblings(".numerical_filter").find(".numerical_value").attr("disabled",false);
          } else {
            $(this).closest(".form-group").siblings(".numerical_filter").toggleClass("filter_disabled");
            $(this).closest(".form-group").siblings(".numerical_filter").find(".radio").toggleClass("disabled");
            $(this).closest(".form-group").siblings(".numerical_filter").find("input[type='radio']").attr("disabled",true);
            $(this).closest(".form-group").siblings(".numerical_filter").find(".numerical_value").attr("disabled",true);
          }
        });
    </script>
</body>

</html>
